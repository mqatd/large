<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simple MP3 Player</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #f0f0f0;
      margin: 0;
      padding: 10px;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    #player {
      background: #1e1e1e;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      width: 100%;
      max-width: 600px;
      min-width: 320px;
      box-sizing: border-box;
    }

    h2 {
      font-size: 1.5rem;
      margin: 0 0 20px 0;
      word-wrap: break-word;
    }

    #controls {
      margin: 20px 0;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
    }

    button {
      padding: 15px;
      border: none;
      border-radius: 50%;
      background: #007bff;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 50px;
      min-height: 50px;
      touch-action: manipulation;
    }

    button:hover {
      background: #0056b3;
      transform: scale(1.05);
    }

    button:active {
      transform: scale(0.95);
    }

    button svg {
      fill: white;
      width: 28px;
      height: 28px;
    }

    #seekbar {
      width: 100%;
      height: 8px;
      margin: 20px 0;
      background: #333;
      border-radius: 4px;
      outline: none;
      appearance: none;
      cursor: pointer;
    }

    #seekbar::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      background: #007bff;
      border-radius: 50%;
      cursor: pointer;
    }

    #seekbar::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #007bff;
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }

    #playlist {
      list-style: none;
      padding: 0;
      margin: 20px 0 0 0;
      max-height: 350px;
      overflow-y: auto;
      text-align: left;
      border-radius: 8px;
      background: #2a2a2a;
    }

    #playlist li {
      padding: 15px;
      cursor: pointer;
      color: #e0e0e0;
      border-bottom: 1px solid #333;
      font-size: 1rem;
      transition: background 0.2s ease;
      touch-action: manipulation;
    }

    #playlist li:last-child {
      border-bottom: none;
    }

    #playlist li.active {
      background: #007bff;
      color: white;
    }

    #playlist li:hover {
      background: #444;
    }

    #playlist li.active:hover {
      background: #0056b3;
    }

    input[type="range"] {
      accent-color: #007bff;
    }

    /* Custom scrollbar */
    #playlist::-webkit-scrollbar {
      width: 8px;
    }

    #playlist::-webkit-scrollbar-track {
      background: #333;
      border-radius: 4px;
    }

    #playlist::-webkit-scrollbar-thumb {
      background: #007bff;
      border-radius: 4px;
    }

    #playlist::-webkit-scrollbar-thumb:hover {
      background: #0056b3;
    }

    /* Mobile specific adjustments */
    @media (max-width: 480px) {
      body {
        padding: 5px;
      }
      
      #player {
        padding: 20px 15px;
        border-radius: 10px;
      }
      
      h2 {
        font-size: 1.3rem;
        margin-bottom: 15px;
      }
      
      button {
        min-width: 55px;
        min-height: 55px;
        padding: 18px;
      }
      
      button svg {
        width: 30px;
        height: 30px;
      }
      
      #controls {
        gap: 20px;
        margin: 25px 0;
      }
      
      #seekbar {
        height: 10px;
        margin: 25px 0;
      }
      
      #seekbar::-webkit-slider-thumb {
        width: 24px;
        height: 24px;
      }
      
      #seekbar::-moz-range-thumb {
        width: 24px;
        height: 24px;
      }
      
      #playlist li {
        padding: 18px 15px;
        font-size: 1.1rem;
      }
      
      #playlist {
        max-height: 300px;
      }
    }

    /* Very small screens */
    @media (max-width: 320px) {
      #player {
        padding: 15px 10px;
      }
      
      #controls {
        gap: 15px;
      }
      
      button {
        min-width: 50px;
        min-height: 50px;
      }
    }

    /* Landscape orientation on mobile */
    @media (max-height: 500px) and (orientation: landscape) {
      body {
        align-items: flex-start;
        padding-top: 20px;
      }
      
      #playlist {
        max-height: 200px;
      }
    }
  </style>
</head>
<body>

<div id="player">
  <h2 id="trackTitle">MP3 Player</h2>
  <audio id="audio" preload="auto"></audio>
  <input type="range" id="seekbar" value="0" max="100">
  <div id="controls">
    <button onclick="prevTrack()" aria-label="Previous">
      <svg viewBox="0 0 24 24"><path d="M6 18V6h2v5.5l7.5-5.5v13L8 12.5V18z"/></svg>
    </button>
    <button onclick="togglePlayPause()" aria-label="Play/Pause">
      <svg id="playPauseIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
    </button>
    <button onclick="nextTrack()" aria-label="Next">
      <svg viewBox="0 0 24 24"><path d="M16 6v5.5L8.5 6v13L16 12.5V18h2V6z"/></svg>
    </button>
  </div>
  <ul id="playlist"></ul>
</div>

<script>
  const tracks = Array.from({length: 20}, (_, i) => ({
    name: `Track ${i + 1}`,
    file: `https://www.soundhelix.com/examples/mp3/SoundHelix-Song-${(i % 16) + 1}.mp3`
  }));

  const audio = document.getElementById('audio');
  const seekbar = document.getElementById('seekbar');
  const playlist = document.getElementById('playlist');
  const playPauseIcon = document.getElementById('playPauseIcon');
  const trackTitle = document.getElementById('trackTitle');
  let currentTrack = 0;
  let isPlaying = false;

  tracks.forEach((track, index) => {
    const li = document.createElement('li');
    li.textContent = track.name;
    li.addEventListener('click', () => {
      loadTrack(index, true);
    });
    playlist.appendChild(li);
  });

  function updatePlaylistUI() {
    playlist.querySelectorAll('li').forEach((li, index) => {
      li.classList.toggle('active', index === currentTrack);
    });
  }

  function updateTrackTitle() {
    trackTitle.textContent = tracks[currentTrack].name;
  }

  function loadTrack(index, autoplay = false) {
    currentTrack = index;
    audio.src = tracks[index].file;
    updatePlaylistUI();
    updateTrackTitle();
    if (autoplay) {
      playTrack();
    }
  }

  function playTrack() {
    audio.play().catch(e => console.log('Play failed:', e));
    isPlaying = true;
    playPauseIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
  }

  function pauseTrack() {
    audio.pause();
    isPlaying = false;
    playPauseIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
  }

  function togglePlayPause() {
    if (isPlaying) {
      pauseTrack();
    } else {
      playTrack();
    }
  }

  function nextTrack() {
    currentTrack = (currentTrack + 1) % tracks.length;
    loadTrack(currentTrack, true);
  }

  function prevTrack() {
    currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
    loadTrack(currentTrack, true);
  }

  audio.addEventListener('timeupdate', () => {
    seekbar.value = (audio.currentTime / audio.duration) * 100 || 0;
  });

  seekbar.addEventListener('input', () => {
    audio.currentTime = (seekbar.value / 100) * audio.duration;
  });

  seekbar.addEventListener('touchstart', (e) => {
    e.preventDefault();
  });

  audio.addEventListener('ended', () => {
    nextTrack();
  });

  // Prevent zoom on double tap for better mobile experience
  let lastTouchEnd = 0;
  document.addEventListener('touchend', function (event) {
    var now = (new Date()).getTime();
    if (now - lastTouchEnd <= 300) {
      event.preventDefault();
    }
    lastTouchEnd = now;
  }, false);

  // Initialize
  loadTrack(currentTrack);
</script>

</body>
</html>
