<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MP3 Player</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#121212" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #121212;
      color: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 10px;
      text-align: center;
    }
    #player {
      background: #1e1e1e;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
      width: 100%;
      max-width: 600px;
    }
    h2 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      word-wrap: break-word;
    }
    #controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 20px 0;
    }
    button {
      background: #007bff;
      border: none;
      border-radius: 50%;
      width: 55px;
      height: 55px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: 0.2s;
    }
    button:hover { background: #0056b3; transform: scale(1.05); }
    button:active { transform: scale(0.95); }
    button svg {
      fill: white;
      width: 24px;
      height: 24px;
    }
    #seekbar {
      width: 100%;
      height: 8px;
      margin: 15px 0;
      background: #333;
      border-radius: 4px;
      appearance: none;
      cursor: pointer;
    }
    #seekbar::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      background: #007bff;
      border-radius: 50%;
    }
    #playlist {
      list-style: none;
      padding: 0;
      margin: 15px 0 0 0;
      max-height: 250px;
      overflow-y: auto;
      background: #2a2a2a;
      border-radius: 8px;
      text-align: left;
    }
    #playlist li {
      padding: 12px 16px;
      border-bottom: 1px solid #333;
      color: #e0e0e0;
      cursor: pointer;
      transition: 0.2s;
    }
    #playlist li:hover { background: #444; }
    #playlist li.active {
      background: #007bff;
      color: white;
    }
    #playlist::-webkit-scrollbar {
      width: 6px;
    }
    #playlist::-webkit-scrollbar-thumb {
      background: #007bff;
      border-radius: 4px;
    }
    @media (max-width: 480px) {
      #player { padding: 15px; }
      h2 { font-size: 1.3rem; }
      #playlist { max-height: 200px; }
    }
  </style>
</head>
<body>
  <div id="player">
    <h2 id="trackTitle">MP3 Player</h2>
    <audio id="audio" preload="auto"></audio>
    <input type="range" id="seekbar" value="0" max="100" />
    <div id="controls">
      <button onclick="prevTrack()" aria-label="Previous">
        <svg viewBox="0 0 24 24"><path d="M6 18V6h2v5.5l7.5-5.5v13L8 12.5V18z"/></svg>
      </button>
      <button onclick="togglePlayPause()" aria-label="Play/Pause">
        <svg id="playPauseIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
      </button>
      <button onclick="nextTrack()" aria-label="Next">
        <svg viewBox="0 0 24 24"><path d="M16 6v5.5L8.5 6v13L16 12.5V18h2V6z"/></svg>
      </button>
    </div>
    <ul id="playlist"></ul>
  </div>

  <script>
    const tracks = [
      { file: "track1.mp3", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" },
      { file: "track2.mp3", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3" },
      { file: "track3.mp3", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" },
      { file: "track4.mp3", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3" },
      { file: "track5.mp3", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3" },
      { file: "track6.mp3", src: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3" }
    ];

    const audio = document.getElementById('audio');
    const seekbar = document.getElementById('seekbar');
    const playlist = document.getElementById('playlist');
    const playPauseIcon = document.getElementById('playPauseIcon');
    const trackTitle = document.getElementById('trackTitle');
    let currentTrack = 0;
    let isPlaying = false;

    function updateTrackTitle() {
      trackTitle.textContent = tracks[currentTrack].file.replace('.mp3', '');
    }

    function updatePlaylistUI() {
      playlist.querySelectorAll('li').forEach((li, index) => {
        li.classList.toggle('active', index === currentTrack);
        if (index === currentTrack) {
          li.scrollIntoView({ behavior: "smooth", block: "nearest" });
        }
      });
    }

    function loadTrack(index, autoplay = false) {
      currentTrack = index;
      audio.src = tracks[index].src;
      updateTrackTitle();
      updatePlaylistUI();
      if (autoplay) playTrack();
    }

    function playTrack() {
      audio.play();
      isPlaying = true;
      playPauseIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
    }

    function pauseTrack() {
      audio.pause();
      isPlaying = false;
      playPauseIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
    }

    function togglePlayPause() {
      isPlaying ? pauseTrack() : playTrack();
    }

    function nextTrack() {
      currentTrack = (currentTrack + 1) % tracks.length;
      loadTrack(currentTrack, true);
    }

    function prevTrack() {
      currentTrack = (currentTrack - 1 + tracks.length) % tracks.length;
      loadTrack(currentTrack, true);
    }

    audio.addEventListener('timeupdate', () => {
      seekbar.value = (audio.currentTime / audio.duration) * 100 || 0;
    });

    seekbar.addEventListener('input', () => {
      audio.currentTime = (seekbar.value / 100) * audio.duration;
    });

    audio.addEventListener('ended', () => {
      nextTrack();
    });

    // Create playlist items
    tracks.forEach((track, index) => {
      const li = document.createElement('li');
      li.textContent = track.file.replace('.mp3', '');
      li.addEventListener('click', () => loadTrack(index, true));
      playlist.appendChild(li);
    });

    loadTrack(currentTrack);

    // Register service worker for PWA
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js');
    }
  </script>
</body>
</html>
